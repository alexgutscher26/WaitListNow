{"version":3,"file":"page.js","sourceRoot":"","sources":["page.tsx"],"names":[],"mappings":";;AAAA,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,MAAM,iBAAiB,CAAC;AACrD,OAAO,EAAE,WAAW,EAAE,MAAM,sBAAsB,CAAC;AACnD,OAAO,EAAE,EAAE,EAAE,MAAM,UAAU,CAAC;AAC9B,OAAO,EAAE,IAAI,EAAE,WAAW,EAAE,QAAQ,EAAE,WAAW,EAAE,MAAM,sBAAsB,CAAC;AAChF,OAAO,EAAE,IAAI,EAAE,WAAW,EAAE,UAAU,EAAE,SAAS,EAAE,MAAM,sBAAsB,CAAC;AAChF,OAAO,EAAE,oBAAoB,EAAE,MAAM,8CAA8C,CAAC;AACpF,OAAO,EAAE,iBAAiB,EAAE,MAAM,2CAA2C,CAAC;AAC9E,OAAO,EAAE,UAAU,EAAE,MAAM,mCAAmC,CAAC;AAC/D,OAAO,EAAE,MAAM,EAAE,MAAM,wBAAwB,CAAC;AAChD,OAAO,EAAE,GAAG,EAAE,KAAK,EAAE,QAAQ,EAAE,QAAQ,EAAE,SAAS,EAAE,MAAM,cAAc,CAAC;AACzE,OAAO,IAAI,MAAM,WAAW,CAAC;AAC7B,OAAO,EAAE,mBAAmB,EAAE,MAAM,UAAU,CAAC;AAC/C,OAAO,EAAE,qBAAqB,EAAE,MAAM,sCAAsC,CAAC;AAC7E,OAAO,EAAE,gBAAgB,EAAE,MAAM,gCAAgC,CAAC;AAMlE,MAAM,CAAC,OAAO,UAAgB,kBAAkB;wDAAC,EAAmC;;YAAjC,MAAM,YAAA;;;;oBAC/C,EAAE,GAAK,MAAM,GAAX,CAAY;oBAET,qBAAM,WAAW,EAAE,EAAA;;oBAA1B,IAAI,GAAG,SAAmB;oBAEhC,IAAI,CAAC,IAAI,EAAE,CAAC;wBACV,QAAQ,CAAC,UAAU,CAAC,CAAC;oBACvB,CAAC;oBAGc,qBAAM,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC;4BACtC,KAAK,EAAE,EAAE,UAAU,EAAE,IAAI,CAAC,EAAE,EAAE;yBAC/B,CAAC,EAAA;;oBAFI,MAAM,GAAG,SAEb;oBAEF,IAAI,CAAC,MAAM,EAAE,CAAC;wBACZ,OAAO,CAAC,KAAK,CAAC,4BAA4B,CAAC,CAAC;wBAC5C,QAAQ,EAAE,CAAC;oBACb,CAAC;oBAGgB,qBAAM,EAAE,CAAC,QAAQ,CAAC,SAAS,CAAC;4BAC3C,KAAK,EAAE;gCACL,EAAE,IAAA;gCACF,MAAM,EAAE,MAAM,CAAC,EAAE;6BAClB;4BACD,OAAO,EAAE;gCACP,MAAM,EAAE;oCACN,MAAM,EAAE;wCACN,WAAW,EAAE,IAAI;qCAClB;iCACF;6BACF;yBACF,CAAC,EAAA;;oBAZI,QAAQ,GAAG,SAYf;oBAEF,IAAI,CAAC,QAAQ,EAAE,CAAC;wBACd,QAAQ,EAAE,CAAC;oBACb,CAAC;oBAGK,UAAU,GAAG,IAAI,IAAI,EAAE,CAAC;oBAC9B,UAAU,CAAC,OAAO,CAAC,UAAU,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;oBACvC,SAAS,GAAG,IAAI,IAAI,EAAE,CAAC;oBAC7B,SAAS,CAAC,OAAO,CAAC,SAAS,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;oBAGE,qBAAM,OAAO,CAAC,GAAG,CAAC;4BAC7D,EAAE,CAAC,UAAU,CAAC,QAAQ,CAAC;gCACrB,KAAK,EAAE;oCACL,UAAU,EAAE,QAAQ,CAAC,EAAE;iCACxB;gCACD,OAAO,EAAE;oCACP,SAAS,EAAE,MAAM;iCAClB;gCACD,IAAI,EAAE,CAAC;6BACR,CAAC;4BACF,EAAE,CAAC,SAAS,iVAAA,qFAGsB,EAAU,+EACV,EAAS,4FAElB,EAAW,QACnC,KAJiC,UAAU,EACV,SAAS,EAElB,QAAQ,CAAC,EAAE,CAOnC;yBACF,CAAC,EAAA;;oBAxBI,KAAuC,SAwB3C,EAxBK,iBAAiB,QAAA,EAAE,eAAe,QAAA;oBA4BnC,KAAK,GAAG,eAAe,CAAC,CAAC,CAAC,CAAC;oBAC3B,gBAAgB,GAAG,MAAM,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;oBACvC,WAAW,GAAG,MAAM,CAAC,KAAK,CAAC,aAAa,CAAC,CAAC;oBAC1C,QAAQ,GAAG,MAAM,CAAC,KAAK,CAAC,SAAS,CAAC,CAAC;oBAGnC,aAAa,GAAG,IAAI,IAAI,EAAE,CAAC;oBACjC,aAAa,CAAC,OAAO,CAAC,aAAa,CAAC,OAAO,EAAE,GAAG,EAAE,CAAC,CAAC;oBAC9C,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC;oBAC/B,WAAW,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;oBAEzB,qBAAM,EAAE,CAAC,UAAU,CAAC,KAAK,CAAC;4BAC9C,KAAK,EAAE;gCACL,UAAU,EAAE,QAAQ,CAAC,EAAE;gCACvB,SAAS,EAAE;oCACT,GAAG,EAAE,aAAa;oCAClB,GAAG,EAAE,WAAW;iCACjB;6BACF;yBACF,CAAC,EAAA;;oBARI,aAAa,GAAG,SAQpB;oBAEI,UAAU,GACd,aAAa,GAAG,CAAC;wBACf,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,WAAW,GAAG,aAAa,CAAC,GAAG,aAAa,CAAC,GAAG,GAAG,CAAC;wBACnE,CAAC,CAAC,WAAW,GAAG,CAAC;4BACf,CAAC,CAAC,GAAG;4BACL,CAAC,CAAC,CAAC,CAAC;oBAEV,sBAAO,CACL,eAAK,SAAS,EAAC,WAAW,aACxB,eAAK,SAAS,EAAC,mCAAmC,aAChD,eAAK,SAAS,EAAC,6BAA6B,aAC1C,KAAC,MAAM,IACL,OAAO,EAAC,OAAO,EACf,IAAI,EAAC,MAAM,EACX,OAAO,kBAEP,KAAC,IAAI,IAAC,IAAI,EAAC,sBAAsB,YAC/B,KAAC,SAAS,IAAC,SAAS,EAAC,SAAS,GAAG,GAC5B,GACA,EACT,0BACE,aAAI,SAAS,EAAC,oBAAoB,YAAE,QAAQ,CAAC,IAAI,GAAM,EACvD,aAAG,SAAS,EAAC,uBAAuB,aAAE,QAAQ,CAAC,MAAM,CAAC,WAAW,0BAAuB,IACpF,IACF,EACN,eAAK,SAAS,EAAC,gBAAgB,aAC7B,KAAC,MAAM,IACL,OAAO,EAAC,SAAS,EACjB,IAAI,EAAC,IAAI,EACT,OAAO,kBAEP,MAAC,IAAI,IACH,IAAI,EAAE,oBAAa,QAAQ,CAAC,IAAI,CAAE,EAClC,MAAM,EAAC,QAAQ,aAEf,KAAC,GAAG,IAAC,SAAS,EAAC,cAAc,GAAG,iBAE3B,GACA,EACT,KAAC,MAAM,IACL,IAAI,EAAC,IAAI,EACT,OAAO,kBAEP,MAAC,IAAI,IAAC,IAAI,EAAE,+BAAwB,QAAQ,CAAC,EAAE,UAAO,aACpD,KAAC,QAAQ,IAAC,SAAS,EAAC,cAAc,GAAG,gBAEhC,GACA,IACL,IACF,EAEN,MAAC,IAAI,IACH,YAAY,EAAC,UAAU,EACvB,SAAS,EAAC,WAAW,aAErB,MAAC,QAAQ,eACP,MAAC,WAAW,IAAC,KAAK,EAAC,UAAU,aAC3B,KAAC,QAAQ,IAAC,SAAS,EAAC,cAAc,GAAG,gBAEzB,EACd,MAAC,WAAW,IAAC,KAAK,EAAC,aAAa,aAC9B,KAAC,KAAK,IAAC,SAAS,EAAC,cAAc,GAAG,mBAEtB,EACd,MAAC,WAAW,IAAC,KAAK,EAAC,UAAU,aAC3B,KAAC,QAAQ,IAAC,SAAS,EAAC,cAAc,GAAG,gBAEzB,IACL,EAEX,MAAC,WAAW,IACV,KAAK,EAAC,UAAU,EAChB,SAAS,EAAC,WAAW,aAErB,eAAK,SAAS,EAAC,0CAA0C,aACvD,MAAC,IAAI,eACH,MAAC,UAAU,IAAC,SAAS,EAAC,2DAA2D,aAC/E,KAAC,SAAS,IAAC,SAAS,EAAC,qBAAqB,kCAA8B,EACxE,KAAC,KAAK,IAAC,SAAS,EAAC,+BAA+B,GAAG,IACxC,EACb,MAAC,WAAW,eACV,cAAK,SAAS,EAAC,oBAAoB,YAAE,gBAAgB,CAAC,cAAc,EAAE,GAAO,EAC7E,YAAG,SAAS,EAAC,+BAA+B,YACzC,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC,WAAI,WAAW,eAAY,CAAC,CAAC,CAAC,8BAA8B,GAC7E,IACQ,IACT,EACP,MAAC,IAAI,eACH,MAAC,UAAU,IAAC,SAAS,EAAC,2DAA2D,aAC/E,KAAC,SAAS,IAAC,SAAS,EAAC,qBAAqB,4BAAwB,EAClE,KAAC,QAAQ,IAAC,SAAS,EAAC,+BAA+B,GAAG,IAC3C,EACb,MAAC,WAAW,eACV,eAAK,SAAS,EAAC,oBAAoB,aAChC,UAAU,IAAI,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAC1B,UAAU,SACP,EACN,YAAG,SAAS,EAAC,+BAA+B,YACzC,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC,WAAI,WAAW,eAAY,CAAC,CAAC,CAAC,WAAW,GAC1D,IACQ,IACT,EACP,MAAC,IAAI,eACH,MAAC,UAAU,IAAC,SAAS,EAAC,2DAA2D,aAC/E,KAAC,SAAS,IAAC,SAAS,EAAC,qBAAqB,2BAAuB,EACjE,cAAK,SAAS,EAAC,mCAAmC,GAAG,IAC1C,EACb,MAAC,WAAW,eACV,cAAK,SAAS,EAAC,oBAAoB,YAAE,QAAQ,GAAO,EACpD,YAAG,SAAS,EAAC,+BAA+B,YACzC,QAAQ,GAAG,CAAC,CAAC,CAAC,CAAC,WAAI,QAAQ,WAAQ,CAAC,CAAC,CAAC,0BAA0B,GAC/D,IACQ,IACT,EACP,MAAC,IAAI,eACH,MAAC,UAAU,IAAC,SAAS,EAAC,2DAA2D,aAC/E,KAAC,SAAS,IAAC,SAAS,EAAC,qBAAqB,uBAAmB,EAC7D,eAAM,SAAS,EAAC,+BAA+B,6BAAU,IAC9C,EACb,MAAC,WAAW,eACV,cAAK,SAAS,EAAC,+BAA+B,YAAE,QAAQ,CAAC,MAAM,CAAC,WAAW,EAAE,GAAO,EACpF,aAAG,SAAS,EAAC,+BAA+B,6BAC7B,GAAG,EACf,mBAAmB,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC,IACrE,IACQ,IACT,IACH,EAEN,eAAK,SAAS,EAAC,0CAA0C,aACvD,cAAK,SAAS,EAAC,YAAY,YACzB,KAAC,qBAAqB,IACpB,UAAU,EAAE,EAAE,EACd,SAAS,EAAC,QAAQ,EAClB,IAAI,EAAE,EAAE,GACR,GACE,EACN,MAAC,IAAI,IAAC,SAAS,EAAC,YAAY,aAC1B,KAAC,UAAU,cACT,KAAC,SAAS,qCAA+B,GAC9B,EACb,KAAC,WAAW,cACT,iBAAiB,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAC9B,cAAK,SAAS,EAAC,WAAW,YACvB,iBAAiB,CAAC,GAAG,CAAC,UAAC,UAAU,IAAK,OAAA,CACrC,cAEE,SAAS,EAAC,mBAAmB,YAE7B,eAAK,SAAS,EAAC,WAAW,aACxB,YAAG,SAAS,EAAC,kCAAkC,YAAE,UAAU,CAAC,KAAK,GAAK,EACtE,YAAG,SAAS,EAAC,+BAA+B,YACzC,IAAI,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,CAAC,kBAAkB,EAAE,GAClD,IACA,IARD,UAAU,CAAC,EAAE,CASd,CACP,EAZsC,CAYtC,CAAC,GACE,CACP,CAAC,CAAC,CAAC,CACF,YAAG,SAAS,EAAC,+BAA+B,mCAAuB,CACpE,GACW,IACT,IACH,IACM,EAEd,KAAC,WAAW,IACV,KAAK,EAAC,aAAa,EACnB,SAAS,EAAC,WAAW,YAErB,MAAC,IAAI,eACH,MAAC,UAAU,eACT,KAAC,SAAS,8BAAwB,EAClC,YAAG,SAAS,EAAC,+BAA+B,0DAExC,IACO,EACb,KAAC,WAAW,cACV,KAAC,gBAAgB,IAAC,UAAU,EAAE,QAAQ,CAAC,EAAE,GAAI,GACjC,IACT,GACK,EAEd,KAAC,WAAW,IACV,KAAK,EAAC,UAAU,EAChB,SAAS,EAAC,WAAW,YAErB,eAAK,SAAS,EAAC,WAAW,aAExB,MAAC,IAAI,eACH,KAAC,UAAU,cACT,KAAC,SAAS,mCAA6B,GAC5B,EACb,KAAC,WAAW,cACV,KAAC,oBAAoB,IACnB,QAAQ,EAAE;wEACR,EAAE,EAAE,QAAQ,CAAC,EAAE;wEACf,IAAI,EAAE,QAAQ,CAAC,IAAI;wEACnB,IAAI,EAAE,QAAQ,CAAC,IAAI;wEACnB,WAAW,EAAE,QAAQ,CAAC,WAAW;qEAClC,GACD,GACU,IACT,EAGP,MAAC,IAAI,eACH,MAAC,UAAU,eACT,KAAC,SAAS,iCAA2B,EACrC,YAAG,SAAS,EAAC,+BAA+B,gEAExC,IACO,EACb,KAAC,WAAW,cACV,KAAC,iBAAiB,IAChB,QAAQ,EAAE;wEACR,EAAE,EAAE,QAAQ,CAAC,EAAE;wEACf,YAAY,EAAE,QAAQ,CAAC,YAGf;qEACT,GACD,GACU,IACT,EAGP,MAAC,IAAI,IAAC,SAAS,EAAC,0BAA0B,aACxC,MAAC,UAAU,eACT,KAAC,SAAS,IAAC,SAAS,EAAC,cAAc,4BAAwB,EAC3D,YAAG,SAAS,EAAC,sBAAsB,sEAE/B,IACO,EACb,KAAC,WAAW,cACV,KAAC,UAAU,IACT,UAAU,EAAE,QAAQ,CAAC,EAAE,EACvB,YAAY,EAAE,QAAQ,CAAC,IAAI,GAC3B,GACU,IACT,IACH,GACM,IACT,IACH,CACP,EAAC;;;;CACH","sourcesContent":["import { notFound, redirect } from 'next/navigation';\r\nimport { currentUser } from '@clerk/nextjs/server';\r\nimport { db } from '@/lib/db';\r\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\r\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\r\nimport { WaitlistSettingsForm } from '@/components/waitlist/waitlist-settings-form';\r\nimport { EmailSettingsForm } from '@/components/waitlist/email-settings-form';\r\nimport { DangerZone } from '@/components/waitlist/danger-zone';\r\nimport { Button } from '@/components/ui/button';\r\nimport { Eye, Users, BarChart, Settings, ArrowLeft } from 'lucide-react';\r\nimport Link from 'next/link';\r\nimport { formatDistanceToNow } from 'date-fns';\r\nimport { SubscriberGrowthChart } from '@/components/subscriber-growth-chart';\r\nimport { SubscribersTable } from '@/components/subscribers-table';\r\n\r\ninterface WaitlistDetailPageProps {\r\n  params: { id: string };\r\n}\r\n\r\nexport default async function WaitlistDetailPage({ params }: WaitlistDetailPageProps) {\r\n  const { id } = params;\r\n  // Get the authenticated user\r\n  const user = await currentUser();\r\n\r\n  if (!user) {\r\n    redirect('/sign-in');\r\n  }\r\n\r\n  // Get the database user\r\n  const dbUser = await db.user.findUnique({\r\n    where: { externalId: user.id },\r\n  });\r\n\r\n  if (!dbUser) {\r\n    console.error('User not found in database');\r\n    notFound();\r\n  }\r\n\r\n  // Find the waitlist and verify ownership\r\n  const waitlist = await db.waitlist.findFirst({\r\n    where: {\r\n      id,\r\n      userId: dbUser.id,\r\n    },\r\n    include: {\r\n      _count: {\r\n        select: {\r\n          subscribers: true,\r\n        },\r\n      },\r\n    },\r\n  });\r\n\r\n  if (!waitlist) {\r\n    notFound();\r\n  }\r\n\r\n  // Get subscriber statistics\r\n  const oneWeekAgo = new Date();\r\n  oneWeekAgo.setDate(oneWeekAgo.getDate() - 7);\r\n  const oneDayAgo = new Date();\r\n  oneDayAgo.setDate(oneDayAgo.getDate() - 1);\r\n\r\n  // Get basic stats and recent subscribers first\r\n  const [recentSubscribers, subscriberStats] = await Promise.all([\r\n    db.subscriber.findMany({\r\n      where: {\r\n        waitlistId: waitlist.id,\r\n      },\r\n      orderBy: {\r\n        createdAt: 'desc',\r\n      },\r\n      take: 5,\r\n    }),\r\n    db.$queryRaw`\r\n      SELECT \r\n        COUNT(*) as total,\r\n        SUM(CASE WHEN \"createdAt\" > ${oneWeekAgo} THEN 1 ELSE 0 END) as new_this_week,\r\n        SUM(CASE WHEN \"createdAt\" > ${oneDayAgo} THEN 1 ELSE 0 END) as new_today\r\n      FROM \"Subscriber\"\r\n      WHERE \"waitlistId\" = ${waitlist.id}\r\n    ` as Promise<\r\n      Array<{\r\n        total: bigint;\r\n        new_this_week: bigint;\r\n        new_today: bigint;\r\n      }>\r\n    >,\r\n  ]);\r\n\r\n  // Growth data will be loaded client-side by the SubscriberGrowthChart component\r\n\r\n  const stats = subscriberStats[0];\r\n  const totalSubscribers = Number(stats.total);\r\n  const newThisWeek = Number(stats.new_this_week);\r\n  const newToday = Number(stats.new_today);\r\n\r\n  // Calculate growth rate (this week vs last week)\r\n  const lastWeekStart = new Date();\r\n  lastWeekStart.setDate(lastWeekStart.getDate() - 14);\r\n  const lastWeekEnd = new Date();\r\n  lastWeekEnd.setDate(lastWeekEnd.getDate() - 7);\r\n\r\n  const lastWeekCount = await db.subscriber.count({\r\n    where: {\r\n      waitlistId: waitlist.id,\r\n      createdAt: {\r\n        gte: lastWeekStart,\r\n        lte: lastWeekEnd,\r\n      },\r\n    },\r\n  });\r\n\r\n  const growthRate =\r\n    lastWeekCount > 0\r\n      ? Math.round(((newThisWeek - lastWeekCount) / lastWeekCount) * 100)\r\n      : newThisWeek > 0\r\n        ? 100\r\n        : 0;\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div className=\"flex items-center justify-between\">\r\n        <div className=\"flex items-center space-x-4\">\r\n          <Button\r\n            variant=\"ghost\"\r\n            size=\"icon\"\r\n            asChild\r\n          >\r\n            <Link href=\"/dashboard/waitlists\">\r\n              <ArrowLeft className=\"h-4 w-4\" />\r\n            </Link>\r\n          </Button>\r\n          <div>\r\n            <h1 className=\"text-2xl font-bold\">{waitlist.name}</h1>\r\n            <p className=\"text-muted-foreground\">{waitlist._count.subscribers} total subscribers</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"flex space-x-2\">\r\n          <Button\r\n            variant=\"outline\"\r\n            size=\"sm\"\r\n            asChild\r\n          >\r\n            <Link\r\n              href={`/waitlist/${waitlist.slug}`}\r\n              target=\"_blank\"\r\n            >\r\n              <Eye className=\"mr-2 h-4 w-4\" />\r\n              View Live\r\n            </Link>\r\n          </Button>\r\n          <Button\r\n            size=\"sm\"\r\n            asChild\r\n          >\r\n            <Link href={`/dashboard/waitlists/${waitlist.id}/edit`}>\r\n              <Settings className=\"mr-2 h-4 w-4\" />\r\n              Settings\r\n            </Link>\r\n          </Button>\r\n        </div>\r\n      </div>\r\n\r\n      <Tabs\r\n        defaultValue=\"overview\"\r\n        className=\"space-y-4\"\r\n      >\r\n        <TabsList>\r\n          <TabsTrigger value=\"overview\">\r\n            <BarChart className=\"mr-2 h-4 w-4\" />\r\n            Overview\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"subscribers\">\r\n            <Users className=\"mr-2 h-4 w-4\" />\r\n            Subscribers\r\n          </TabsTrigger>\r\n          <TabsTrigger value=\"settings\">\r\n            <Settings className=\"mr-2 h-4 w-4\" />\r\n            Settings\r\n          </TabsTrigger>\r\n        </TabsList>\r\n\r\n        <TabsContent\r\n          value=\"overview\"\r\n          className=\"space-y-4\"\r\n        >\r\n          <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-4\">\r\n            <Card>\r\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                <CardTitle className=\"text-sm font-medium\">Total Subscribers</CardTitle>\r\n                <Users className=\"h-4 w-4 text-muted-foreground\" />\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"text-2xl font-bold\">{totalSubscribers.toLocaleString()}</div>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  {newThisWeek > 0 ? `+${newThisWeek} this week` : 'No new subscribers this week'}\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n            <Card>\r\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                <CardTitle className=\"text-sm font-medium\">Growth Rate</CardTitle>\r\n                <BarChart className=\"h-4 w-4 text-muted-foreground\" />\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"text-2xl font-bold\">\r\n                  {growthRate >= 0 ? '+' : ''}\r\n                  {growthRate}%\r\n                </div>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  {newThisWeek > 0 ? `+${newThisWeek} this week` : 'No growth'}\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n            <Card>\r\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                <CardTitle className=\"text-sm font-medium\">Active Now</CardTitle>\r\n                <div className=\"h-2 w-2 rounded-full bg-green-500\" />\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"text-2xl font-bold\">{newToday}</div>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  {newToday > 0 ? `+${newToday} today` : 'No new subscribers today'}\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n            <Card>\r\n              <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\r\n                <CardTitle className=\"text-sm font-medium\">Status</CardTitle>\r\n                <span className=\"h-4 w-4 text-muted-foreground\">📊</span>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <div className=\"text-2xl font-bold capitalize\">{waitlist.status.toLowerCase()}</div>\r\n                <p className=\"text-xs text-muted-foreground\">\r\n                  Last updated{' '}\r\n                  {formatDistanceToNow(new Date(waitlist.updatedAt), { addSuffix: true })}\r\n                </p>\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n\r\n          <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-7\">\r\n            <div className=\"col-span-4\">\r\n              <SubscriberGrowthChart\r\n                waitlistId={id}\r\n                className=\"w-full\"\r\n                days={30}\r\n              />\r\n            </div>\r\n            <Card className=\"col-span-3\">\r\n              <CardHeader>\r\n                <CardTitle>Recent Subscribers</CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                {recentSubscribers.length > 0 ? (\r\n                  <div className=\"space-y-4\">\r\n                    {recentSubscribers.map((subscriber) => (\r\n                      <div\r\n                        key={subscriber.id}\r\n                        className=\"flex items-center\"\r\n                      >\r\n                        <div className=\"space-y-1\">\r\n                          <p className=\"text-sm font-medium leading-none\">{subscriber.email}</p>\r\n                          <p className=\"text-sm text-muted-foreground\">\r\n                            {new Date(subscriber.createdAt).toLocaleDateString()}\r\n                          </p>\r\n                        </div>\r\n                      </div>\r\n                    ))}\r\n                  </div>\r\n                ) : (\r\n                  <p className=\"text-sm text-muted-foreground\">No subscribers yet</p>\r\n                )}\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </TabsContent>\r\n\r\n        <TabsContent\r\n          value=\"subscribers\"\r\n          className=\"space-y-4\"\r\n        >\r\n          <Card>\r\n            <CardHeader>\r\n              <CardTitle>Subscribers</CardTitle>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                View and manage your waitlist subscribers\r\n              </p>\r\n            </CardHeader>\r\n            <CardContent>\r\n              <SubscribersTable waitlistId={waitlist.id} />\r\n            </CardContent>\r\n          </Card>\r\n        </TabsContent>\r\n\r\n        <TabsContent\r\n          value=\"settings\"\r\n          className=\"space-y-6\"\r\n        >\r\n          <div className=\"space-y-6\">\r\n            {/* General Settings */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>General Settings</CardTitle>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <WaitlistSettingsForm\r\n                  waitlist={{\r\n                    id: waitlist.id,\r\n                    name: waitlist.name,\r\n                    slug: waitlist.slug,\r\n                    description: waitlist.description,\r\n                  }}\r\n                />\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Email Settings */}\r\n            <Card>\r\n              <CardHeader>\r\n                <CardTitle>Email Settings</CardTitle>\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  Customize email notifications and confirmations\r\n                </p>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <EmailSettingsForm\r\n                  waitlist={{\r\n                    id: waitlist.id,\r\n                    customFields: waitlist.customFields as {\r\n                      sendConfirmationEmail?: boolean;\r\n                      customThankYouMessage?: string;\r\n                    } | null,\r\n                  }}\r\n                />\r\n              </CardContent>\r\n            </Card>\r\n\r\n            {/* Danger Zone */}\r\n            <Card className=\"border-red-200 bg-red-50\">\r\n              <CardHeader>\r\n                <CardTitle className=\"text-red-700\">Danger Zone</CardTitle>\r\n                <p className=\"text-sm text-red-600\">\r\n                  These actions are irreversible. Proceed with caution.\r\n                </p>\r\n              </CardHeader>\r\n              <CardContent>\r\n                <DangerZone\r\n                  waitlistId={waitlist.id}\r\n                  waitlistName={waitlist.name}\r\n                />\r\n              </CardContent>\r\n            </Card>\r\n          </div>\r\n        </TabsContent>\r\n      </Tabs>\r\n    </div>\r\n  );\r\n}\r\n"]}