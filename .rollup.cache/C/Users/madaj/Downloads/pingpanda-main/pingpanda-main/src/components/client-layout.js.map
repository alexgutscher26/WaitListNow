{"version":3,"file":"client-layout.js","sourceRoot":"","sources":["client-layout.tsx"],"names":[],"mappings":"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","sourcesContent":["'use client';\n\nimport React, { useEffect, useState } from 'react';\nimport dynamic from 'next/dynamic';\nimport { usePathname } from 'next/navigation';\n\n// Import providers\nconst ClerkProvider = dynamic(\n  () => import('@/providers/clerk-provider').then(mod => mod.ClerkProvider),\n  { ssr: true, loading: () => null }\n);\n\nconst QueryProvider = dynamic(\n  () => import('@/providers/query-provider').then(mod => mod.QueryProvider),\n  { ssr: true, loading: () => null }\n);\n\nconst PostHogProvider = dynamic(\n  () => import('@/providers/posthog-provider').then(mod => mod.PostHogProvider),\n  { ssr: true, loading: () => null }\n);\n\n// Lazy load client providers with proper code splitting\nconst ClientProviders = dynamic(\n  () => import('@/components/providers/client-providers').then(mod => ({\n    default: function DynamicClientProviders({ children }: { children: React.ReactNode }) {\n      return <mod.ClientProviders>{children}</mod.ClientProviders>;\n    }\n  })),\n  { \n    ssr: false,\n    loading: () => (\n      <div className=\"flex h-screen w-full items-center justify-center\">\n        <div className=\"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent\" />\n      </div>\n    )\n  }\n);\n\n// Client components with dynamic imports\nconst ClientSideComponents = dynamic(\n  () => import('@/components/client-side-components').then(mod => ({\n    default: function DynamicClientComponents() {\n      return <mod.ClientSideComponents />;\n    }\n  })),\n  { \n    ssr: false,\n    loading: () => null\n  }\n);\n\ninterface ClientLayoutProps {\n  children: React.ReactNode;\n  modal: React.ReactNode;\n}\n\nexport function ClientLayout({ children, modal }: ClientLayoutProps) {\n  const [mounted, setMounted] = useState(false);\n  const pathname = usePathname();\n  const isDashboardRoute = pathname?.startsWith('/dashboard');\n\n  useEffect(() => {\n    setMounted(true);\n  }, []);\n\n  // Don't render anything until the component is mounted on the client\n  if (!mounted) {\n    return (\n      <div className=\"flex h-screen w-full items-center justify-center\">\n        <div className=\"h-8 w-8 animate-spin rounded-full border-2 border-primary border-t-transparent\" />\n      </div>\n    );\n  }\n\n  // For dashboard routes, only render the children as they have their own layout\n  if (isDashboardRoute) {\n    return (\n      <ClerkProvider>\n        <QueryProvider>\n          <PostHogProvider>\n            <ClientProviders>\n              {children}\n              {modal}\n              <ClientSideComponents />\n            </ClientProviders>\n          </PostHogProvider>\n        </QueryProvider>\n      </ClerkProvider>\n    );\n  }\n\n  // For non-dashboard routes, use the default layout\n  return (\n    <ClerkProvider>\n      <QueryProvider>\n        <PostHogProvider>\n          <ClientProviders>\n            <div className=\"flex min-h-screen flex-col\">\n              <main className=\"flex-1\">\n                {children}\n                {modal}\n              </main>\n            </div>\n            <ClientSideComponents />\n          </ClientProviders>\n        </PostHogProvider>\n      </QueryProvider>\n    </ClerkProvider>\n  );\n}\n"]}