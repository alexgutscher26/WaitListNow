{"version":3,"file":"payment-success-modal.js","sourceRoot":"","sources":["payment-success-modal.tsx"],"names":[],"mappings":"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","sourcesContent":["'use client';\r\n\r\nimport React, { useState } from 'react';\r\nimport { client } from '@/lib/client';\r\nimport { useQuery } from '@tanstack/react-query';\r\nimport { useRouter } from 'next/navigation';\r\nimport Image from 'next/image';\r\nimport { Modal } from './ui/modal';\r\nimport { LoadingSpinner } from './loading-spinner';\r\nimport { Button } from './ui/button';\r\nimport { CheckIcon } from 'lucide-react';\r\n\r\n/**\r\n * PaymentSuccessModal component\r\n *\r\n * This component displays a modal indicating the success of a payment upgrade to the PRO plan.\r\n * It fetches the user's current plan status and shows a loading state if the plan is still being processed.\r\n * Once the plan upgrade is confirmed, it displays a success message with an image and a button to redirect to the dashboard.\r\n */\r\nexport const PaymentSuccessModal = () => {\r\n  const router = useRouter();\r\n  const [isOpen, setIsOpen] = useState(true);\r\n\r\n  const { data, isPending } = useQuery({\r\n    queryKey: ['user-plan'],\r\n    queryFn: async () => {\r\n      const res = await client.payment.getUserPlan.$get({});\r\n      return await res.json();\r\n    },\r\n    refetchInterval: (query) => {\r\n      return query.state.data?.plan === 'PRO' ? false : 1000;\r\n    },\r\n  });\r\n\r\n  /**\r\n   * Closes the modal and navigates to the dashboard.\r\n   */\r\n  const handleClose = () => {\r\n    setIsOpen(false);\r\n    router.push('/dashboard');\r\n  };\r\n\r\n  // Plan configuration for modal content\r\n  const planConfigs = {\r\n    FREE: {\r\n      name: 'Free',\r\n      message: 'You are on the Free plan. Upgrade to unlock more features!',\r\n      success: 'Free Plan',\r\n      image: '/brand-asset-heart.png',\r\n    },\r\n    STARTER: {\r\n      name: 'Starter',\r\n      message: 'Thank you for upgrading to Starter! Enjoy more features and higher limits.',\r\n      success: 'Starter Plan Activated! ðŸš€',\r\n      image: '/brand-asset-heart.png',\r\n    },\r\n    GROWTH: {\r\n      name: 'Growth',\r\n      message: 'Thank you for upgrading to Growth! You now have access to advanced features.',\r\n      success: 'Growth Plan Activated! ðŸ“ˆ',\r\n      image: '/brand-asset-heart.png',\r\n    },\r\n    PRO: {\r\n      name: 'Pro',\r\n      message: 'Thank you for upgrading to Pro and supporting WaitlistNow. Your account has been upgraded.',\r\n      success: 'Upgrade successful! ðŸŽ‰',\r\n      image: '/brand-asset-heart.png',\r\n    },\r\n  };\r\n\r\n  const plan = data?.plan as keyof typeof planConfigs;\r\n  const planConfig = planConfigs[plan] || planConfigs.FREE;\r\n  const isPaymentSuccessful = plan && plan !== 'FREE';\r\n\r\n  return (\r\n    <Modal\r\n      showModal={isOpen}\r\n      setShowModal={setIsOpen}\r\n      onClose={handleClose}\r\n      className=\"px-6 pt-6\"\r\n      preventDefaultClose={!isPaymentSuccessful}\r\n    >\r\n      <div className=\"flex flex-col items-center\">\r\n        {isPending || !isPaymentSuccessful ? (\r\n          <div className=\"flex flex-col items-center justify-center h-64\">\r\n            <LoadingSpinner className=\"mb-4\" />\r\n            <p className=\"text-lg/7 font-medium text-gray-900\">Upgrading your account...</p>\r\n            <p className=\"text-gray-600 text-sm/6 mt-2 text-center text-pretty\">\r\n              Please wait while we process your upgrade. This may take a moment.\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          <>\r\n            <div className=\"relative aspect-video border border-gray-200 w-full overflow-hidden rounded-lg bg-gray-50\">\r\n              <Image\r\n                src={planConfig.image}\r\n                alt=\"Payment success\"\r\n                fill\r\n                sizes=\"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw\"\r\n                className=\"object-cover\"\r\n                priority\r\n              />\r\n            </div>\r\n\r\n            <div className=\"mt-6 flex flex-col items-center gap-1 text-center\">\r\n              <p className=\"text-lg/7 tracking-tight font-medium text-pretty\">\r\n                {planConfig.success}\r\n              </p>\r\n              <p className=\"text-gray-600 text-sm/6 text-pretty\">\r\n                {planConfig.message}\r\n              </p>\r\n            </div>\r\n\r\n            <div className=\"mt-8 w-full\">\r\n              <Button\r\n                onClick={handleClose}\r\n                className=\"h-12 w-full\"\r\n              >\r\n                <CheckIcon className=\"mr-2 size-5\" />\r\n                Go to Dashboard\r\n              </Button>\r\n            </div>\r\n          </>\r\n        )}\r\n      </div>\r\n    </Modal>\r\n  );\r\n};\r\n"]}