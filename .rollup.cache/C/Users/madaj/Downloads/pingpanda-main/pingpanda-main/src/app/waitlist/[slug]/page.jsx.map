{"version":3,"file":"page.jsx","sourceRoot":"","sources":["page.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport { notFound } from 'next/navigation';\r\nimport { db } from '@/lib/db';\r\nimport { WaitlistWidget } from '@/components/waitlist-widget';\r\n\r\ninterface WaitlistPageProps {\r\n  params: {\r\n    slug: string;\r\n  };\r\n}\r\n\r\nexport default async function WaitlistPage({ params }: WaitlistPageProps) {\r\n  // console.log('Fetching waitlist with slug:', params.slug);\r\n\r\n  try {\r\n    // First try to find the waitlist by slug without status filter\r\n    const waitlist = await db.waitlist.findFirst({\r\n      where: {\r\n        slug: params.slug,\r\n      },\r\n      include: {\r\n        _count: {\r\n          select: {\r\n            subscribers: true,\r\n          },\r\n        },\r\n      },\r\n    });\r\n\r\n    // console.log('Found waitlist (any status):', waitlist);\r\n\r\n    if (!waitlist) {\r\n      // console.log('Waitlist not found, showing ended message for slug:', params.slug);\r\n      return (\r\n        <div className=\"min-h-screen flex items-center justify-center p-4 bg-gray-100\">\r\n          <div className=\"max-w-md w-full space-y-6 text-center\">\r\n            <div className=\"space-y-2\">\r\n              <h1 className=\"text-3xl font-bold tracking-tight\">Waitlist Ended</h1>\r\n              <p className=\"text-muted-foreground\">\r\n                This waitlist is no longer active or has ended.\r\n              </p>\r\n              <p className=\"text-sm text-muted-foreground\">\r\n                If you believe this is a mistake, please contact the waitlist owner.\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (waitlist.status !== 'ACTIVE') {\r\n      // Don't log an error since we're handling this case gracefully\r\n      // console.log(`Waitlist found with status: ${waitlist.status}. Showing appropriate message.`);\r\n      return (\r\n        <div className=\"min-h-screen flex items-center justify-center p-4 bg-gray-100\">\r\n          <div className=\"max-w-md w-full space-y-6 text-center\">\r\n            <div className=\"space-y-2\">\r\n              <h1 className=\"text-3xl font-bold tracking-tight\">{waitlist.name}</h1>\r\n              <p className=\"text-muted-foreground\">\r\n                This waitlist is currently {waitlist.status.toLowerCase()}.\r\n              </p>\r\n              {waitlist.status === 'DRAFT' && (\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  The owner of this waitlist needs to publish it before it can be accessed.\r\n                </p>\r\n              )}\r\n              {waitlist.status === 'PAUSED' && (\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  This waitlist is currently paused. Please check back later.\r\n                </p>\r\n              )}\r\n              {waitlist.status === 'ARCHIVED' && (\r\n                <p className=\"text-sm text-muted-foreground\">\r\n                  This waitlist has been archived and is no longer accepting new signups.\r\n                </p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    // Type definitions for style and settings\r\n    type WaitlistStyle = {\r\n      buttonText?: string;\r\n      buttonColor?: string;\r\n      buttonTextColor?: string;\r\n      backgroundColor?: string;\r\n      textColor?: string;\r\n      borderRadius?: number;\r\n      fontFamily?: string;\r\n      showLabels?: boolean;\r\n      formLayout?: 'stacked' | 'inline';\r\n      showBranding?: boolean;\r\n    };\r\n\r\n    // Settings type definition\r\n    type WaitlistSettings = {\r\n      [key: string]: unknown;\r\n    };\r\n\r\n    // Get the style and settings objects with type safety\r\n    const style: WaitlistStyle =\r\n      waitlist.style && typeof waitlist.style === 'object' && !Array.isArray(waitlist.style)\r\n        ? (waitlist.style as WaitlistStyle)\r\n        : {};\r\n\r\n    const settings: WaitlistSettings =\r\n      waitlist.settings &&\r\n      typeof waitlist.settings === 'object' &&\r\n      !Array.isArray(waitlist.settings)\r\n        ? (waitlist.settings as WaitlistSettings)\r\n        : {};\r\n\r\n    const showBranding = style.showBranding !== false;\r\n\r\n    return (\r\n      <div className=\"min-h-screen bg-gray-100 flex items-center justify-center p-6\">\r\n        <div className=\"w-full max-w-md\">\r\n          {/* Browser-style header */}\r\n          <div className=\"bg-gray-200 rounded-t-xl px-4 py-3 flex items-center space-x-3\">\r\n            <div className=\"flex space-x-2\">\r\n              <div className=\"w-3 h-3 bg-red-500 rounded-full\" />\r\n              <div className=\"w-3 h-3 bg-yellow-500 rounded-full\" />\r\n              <div className=\"w-3 h-3 bg-green-500 rounded-full\" />\r\n            </div>\r\n            <div className=\"flex-1 text-center\">\r\n              <span className=\"text-gray-700 text-sm font-normal\">waitlist.yourdomain.com</span>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Main content card */}\r\n          <div className=\"bg-white rounded-b-xl shadow-lg overflow-hidden\">\r\n            <div className=\"px-12 py-16 text-center\">\r\n              <h1 className=\"text-4xl font-bold text-gray-900 mb-6 leading-tight\">\r\n                {waitlist.name || 'Join the Waitlist'}\r\n              </h1>\r\n\r\n              {waitlist.description ? (\r\n                <p className=\"text-gray-600 text-lg mb-12 leading-relaxed font-normal\">\r\n                  {waitlist.description}\r\n                </p>\r\n              ) : (\r\n                <p className=\"text-gray-600 text-lg mb-12 leading-relaxed font-normal\">\r\n                  Be the first to know when we launch. Early adopters get exclusive perks!\r\n                </p>\r\n              )}\r\n\r\n              <WaitlistWidget\r\n                waitlistId={waitlist.id}\r\n                style={{\r\n                  buttonText: style.buttonText,\r\n                  buttonColor: style.buttonColor,\r\n                  buttonTextColor: style.buttonTextColor,\r\n                  backgroundColor: style.backgroundColor,\r\n                  textColor: style.textColor,\r\n                  borderRadius: style.borderRadius,\r\n                  fontFamily: style.fontFamily,\r\n                  showLabels: style.showLabels,\r\n                  formLayout: style.formLayout,\r\n                }}\r\n              />\r\n\r\n              <p className=\"text-gray-500 text-base font-normal mb-6\">\r\n                Join{' '}\r\n                {waitlist.subscriberCount > 0\r\n                  ? waitlist.subscriberCount.toLocaleString()\r\n                  : '1,247'}{' '}\r\n                others on the waitlist\r\n              </p>\r\n\r\n              {/* Powered by WaitlistNow badge - can be hidden after payment */}\r\n              {showBranding && (\r\n                <div className=\"mt-8 pt-4 border-t border-gray-100\">\r\n                  <div className=\"flex items-center justify-center space-x-1 text-sm text-gray-400\">\r\n                    <span>Powered by</span>\r\n                    <a\r\n                      href=\"https://waitlistnow.com\"\r\n                      target=\"_blank\"\r\n                      rel=\"noopener noreferrer\"\r\n                      className=\"font-medium text-gray-500 hover:text-gray-700 transition-colors\"\r\n                    >\r\n                      WaitlistNow\r\n                    </a>\r\n                    <span className=\"ml-1.5 rounded-full bg-amber-100 px-1.5 py-0.5 text-[10px] font-medium text-amber-800\">\r\n                      PRO\r\n                    </span>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  } catch (error) {\r\n    console.error('Error fetching waitlist:', error);\r\n    notFound();\r\n  }\r\n}\r\n\r\nexport async function generateMetadata({ params }: WaitlistPageProps) {\r\n  try {\r\n    const waitlist = await db.waitlist.findUnique({\r\n      where: {\r\n        slug: params.slug,\r\n      },\r\n    });\r\n\r\n    if (!waitlist) {\r\n      return {\r\n        title: 'Waitlist Not Found',\r\n        description: 'The requested waitlist could not be found.',\r\n      };\r\n    }\r\n\r\n    return {\r\n      title: waitlist.name,\r\n      description: waitlist.description || `Join the waitlist for ${waitlist.name}`,\r\n    };\r\n  } catch (error) {\r\n    console.error('Error generating metadata:', error);\r\n    return {\r\n      title: 'Waitlist',\r\n      description: 'Join our waitlist to be the first to know when we launch.',\r\n    };\r\n  }\r\n}\r\n"]}